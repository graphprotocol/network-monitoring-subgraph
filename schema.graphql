type GlobalState @entity {
  id: ID!
  oracles: [Oracle!]! @derivedFrom(field: "state")
}

type Oracle @entity {
  id: String! # oracle_index
  state: GlobalState!
  address: Bytes!
  latestConfig: OracleConfiguration!
  configurations: [OracleConfiguration!]! @derivedFrom(field: "oracle")
  votes: [OracleVote!]! @derivedFrom(field: "oracle")
}

type OracleVote @entity(immutable: true) {
  id: ID!
  oracle: Oracle!
  subgraphDeploymentID: Bytes! # bytes32
  deny: Boolean! # bool
  timestamp: BigInt! # uint256
}

type OracleConfiguration @entity {
  id: ID!
  oracle: Oracle!
  commitHash: String!
  ipfsConcurrency: String!
  ipfsTimeout: String!
  minSignal: String!
  period: String!
  gracePeriod: String!
  supportedDataSourceKinds: String!
  subgraph: String!
  subgraphAvailabilityManagerContract: String!
  oracleIndex: String!
}